<?xml version="1.0" encoding="utf-8"?>
<Talents>
    <Talent identifier="KokoroTalent" trackedstat="Mood_Learning_Counter" trackedmax="66">
        <Icon texture="%ModDir%/Images/Talents/KokoroTalent.png" sheetindex="0,0" sheetelementsize="128,128" />
        <Description tag="talentdescription.KokoroTalent"/>
        <AbilityGroupInterval interval="2.9">
            <Conditions>
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface" invert="true" />
                <AbilityConditionHasPermanentStat statidentifier="Mood_Learning_Counter" min="1" />
            </Conditions>
            <Abilities>
                <CharacterAbilityGivePermanentStat statidentifier="Mood_Learning_Counter" value="-1" removeondeath="false" />
            </Abilities>
        </AbilityGroupInterval>
        <AbilityGroupEffect abilityeffecttype="OnLootCharacter">
            <Conditions>
                <AbilityConditionCharacter targettype="Any">
                    <Conditional maxhealth="gt 40"/>
                    <Conditional ismachine="false" />
                    <Conditional ispet="false" />
                    <Conditional KokoroTalent_Mark="lte 0" />
                </AbilityConditionCharacter>
                <AbilityConditionServerRandom randomchance="0.35" />
            </Conditions>
            <Abilities>
                <CharacterAbilityApplyStatusEffects>
                    <StatusEffects>
                        <StatusEffect type="OnAbility" target="UseTarget" disabledeltatime="true" >
                            <ParticleEmitter particle="spark" copyentityangle="true" anglemin="-10" anglemax="10" particleamount="15" velocitymin="100" velocitymax="200" scalemin="0.8" scalemax="1.6" colormultiplier="200,50,150,255"/>
                        </StatusEffect>
                    </StatusEffects>
                </CharacterAbilityApplyStatusEffects>
                <CharacterAbilityGivePermanentStat statidentifier="Mood_Learning_Counter" value="1" removeondeath="false" />
            </Abilities>
        </AbilityGroupEffect>
        <AbilityGroupEffect abilityeffecttype="OnLootCharacter">
            <Conditions>
                <AbilityConditionCharacter targettype="Any">
                    <Conditional maxhealth="gt 40"/>
                    <Conditional ismachine="false" />
                    <Conditional KokoroTalent_Mark="lte 0" />
                </AbilityConditionCharacter>
            </Conditions>
            <Abilities>
                <CharacterAbilityApplyStatusEffects>
                    <StatusEffects>
                        <StatusEffect type="OnAbility" target="UseTarget" disabledeltatime="true" >
                            <Affliction identifier="KokoroTalent_Mark" amount="100" />
                        </StatusEffect>
                    </StatusEffects>
                </CharacterAbilityApplyStatusEffects>
            </Abilities>
        </AbilityGroupEffect>
        <AbilityGroupInterval interval="2.9">
            <Conditions>
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface" />
                <AbilityConditionHasPermanentStat statidentifier="Mood_Learning_Counter" min="1" />
            </Conditions>
            <Abilities>
                <CharacterAbilityApplyStatusEffects>
                    <StatusEffects>
                        <StatusEffect type="OnAbility" target="Character" disabledeltatime="true">
                            <Affliction identifier="KokoroTalent_Prerequisite" amount="100" />
                        </StatusEffect>
                    </StatusEffects>
                </CharacterAbilityApplyStatusEffects>
            </Abilities>
        </AbilityGroupInterval>
        <AbilityGroupInterval interval="3.1">
            <Conditions>
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface" />
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface_Switch" />
                <AbilityConditionHasPermanentStat statidentifier="Mood_Learning_Counter" min="1" />
            </Conditions>
            <Abilities>
                <CharacterAbilityGivePermanentStat statidentifier="Mood_Learning_Counter" value="-1" removeondeath="false" />
            </Abilities>
        </AbilityGroupInterval>

        <AbilityGroupInterval interval="3.0">
            <Conditions>
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface" />
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface_Mood01" />
            </Conditions>
            <Abilities>
                <CharacterAbilityModifyStat stattype="MovementSpeed" value="0.15" />
                <CharacterAbilityModifyStat stattype="RangedAttackSpeed" value="0.15" />
                <CharacterAbilityModifyStat stattype="MeleeAttackSpeed" value="0.15"/>
            </Abilities>
        </AbilityGroupInterval>

        <AbilityGroupInterval interval="3.0">
            <Conditions>
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface" />
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface_Mood02" />
            </Conditions>
            <Abilities>
                <CharacterAbilityModifyStat stattype="RangedAttackSpeed" value="-0.24" />
                <CharacterAbilityModifyStat stattype="MeleeAttackSpeed" value="-0.24"/>
                <CharacterAbilityModifyStat stattype="RangedAttackMultiplier" value="0.25" />
                <CharacterAbilityModifyStat stattype="MeleeAttackMultiplier" value="0.5"/>
            </Abilities>
        </AbilityGroupInterval>

        <AbilityGroupEffect abilityeffecttype="OnAttacked">
            <Conditions>
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface" />
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface_Mood03" />
            </Conditions>
            <Abilities>
                <CharacterAbilityModifyAttackData addeddamagemultiplier="-0.15" />
            </Abilities>
        </AbilityGroupEffect>
        <AbilityGroupInterval interval="3.0">
            <Conditions>
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface" />
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface_Mood03" />
            </Conditions>
            <Abilities>
                <CharacterAbilityModifyStat stattype="MaximumHealthMultiplier" value="0.15" />
            </Abilities>
        </AbilityGroupInterval>

        <AbilityGroupInterval interval="3.0">
            <Conditions>
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface" />
                <AbilityConditionHasAffliction afflictionidentifier="Expressive_Pokerface_Mood04" />
            </Conditions>
            <Abilities>
                <CharacterAbilityModifyResistance resistanceid="stun" multiplier="0.9" />
                <CharacterAbilityModifyResistance resistanceid="psychosis" multiplier="0" />
            </Abilities>
        </AbilityGroupInterval>
    </Talent>
</Talents>